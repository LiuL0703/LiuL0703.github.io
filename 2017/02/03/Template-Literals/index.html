<!doctype html>



  


<html class="theme-next pisces use-motion" lang="zh-Hans">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>



<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />












  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css" />




  
  
  
  

  
    
    
  

  

  

  

  

  
    
    
    <link href="//fonts.googleapis.com/css?family=Lato:300,300italic,400,400italic,700,700italic&subset=latin,latin-ext" rel="stylesheet" type="text/css">
  






<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=5.1.0" rel="stylesheet" type="text/css" />


  <meta name="keywords" content="JavaScript,ES6," />








  <link rel="shortcut icon" type="image/x-icon" href="/favicon.ico?v=5.1.0" />






<meta name="description" content="&amp;emsp;&amp;emsp;今天碰上一道这样的题 然后想说的是关于ES6的新特性 模板字符串
Description:You probably know the “like” system from Facebook and other pages. People can “like” blog posts, pictures or other items. We want to create the">
<meta property="og:type" content="article">
<meta property="og:title" content="Template Literals(模板字符串)">
<meta property="og:url" content="http://yoursite.com/2017/02/03/Template-Literals/index.html">
<meta property="og:site_name" content="LouieLiu">
<meta property="og:description" content="&amp;emsp;&amp;emsp;今天碰上一道这样的题 然后想说的是关于ES6的新特性 模板字符串
Description:You probably know the “like” system from Facebook and other pages. People can “like” blog posts, pictures or other items. We want to create the">
<meta property="og:updated_time" content="2017-02-04T03:34:31.000Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Template Literals(模板字符串)">
<meta name="twitter:description" content="&amp;emsp;&amp;emsp;今天碰上一道这样的题 然后想说的是关于ES6的新特性 模板字符串
Description:You probably know the “like” system from Facebook and other pages. People can “like” blog posts, pictures or other items. We want to create the">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Pisces',
    sidebar: {"position":"left","display":"post"},
    fancybox: true,
    motion: true,
    duoshuo: {
      userId: 'undefined',
      author: '博主'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="http://yoursite.com/2017/02/03/Template-Literals/"/>





  <title> Template Literals(模板字符串) | LouieLiu </title>
</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-Hans">

  





  <script type="text/javascript">
    (function() {
      var hm = document.createElement("script");
      hm.src = "//tajs.qq.com/stats?sId=60546079";
      var s = document.getElementsByTagName("script")[0];
      s.parentNode.insertBefore(hm, s);
    })();
  </script>






  
  
    
  

  <div class="container one-collumn sidebar-position-left page-post-detail ">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-meta ">
  

  <div class="custom-logo-site-title">
    <a href="/"  class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <span class="site-title">LouieLiu</span>
      <span class="logo-line-after"><i></i></span>
    </a>
  </div>
    
      <p class="site-subtitle"></p>
    
</div>

<div class="site-nav-toggle">
  <button>
    <span class="btn-bar"></span>
    <span class="btn-bar"></span>
    <span class="btn-bar"></span>
  </button>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br />
            
            首页
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br />
            
            归档
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-tags"></i> <br />
            
            标签
          </a>
        </li>
      
        
        <li class="menu-item menu-item-about">
          <a href="/about" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-user"></i> <br />
            
            关于
          </a>
        </li>
      

      
    </ul>
  

  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            

  <div id="posts" class="posts-expand">
    

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
  <link itemprop="mainEntityOfPage" href="http://yoursite.com/2017/02/03/Template-Literals/">

  <span style="display:none" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <meta itemprop="name" content="LiuLei">
    <meta itemprop="description" content="">
    <meta itemprop="image" content="/uploads/avatar.png">
  </span>

  <span style="display:none" itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
    <meta itemprop="name" content="LouieLiu">
    <span style="display:none" itemprop="logo" itemscope itemtype="http://schema.org/ImageObject">
      <img style="display:none;" itemprop="url image" alt="LouieLiu" src="">
    </span>
  </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                Template Literals(模板字符串)
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2017-02-03T20:45:57+08:00">
                2017-02-03
              </time>
            

            

            
          </span>

          

          
            
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <span class="post-meta-item-icon">
                  <i class="fa fa-comment-o"></i>
                </span>
                <a href="/2017/02/03/Template-Literals/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count disqus-comment-count" data-disqus-identifier="2017/02/03/Template-Literals/" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          

          
          

          

          

        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        <p>&emsp;&emsp;今天碰上一道这样的题 然后想说的是关于ES6的新特性 模板字符串</p>
<h2 id="Description"><a href="#Description" class="headerlink" title="Description:"></a>Description:</h2><p>You probably know the “like” system from Facebook and other pages. People can “like” blog posts, pictures or other items. We want to create the text that should be displayed next to such an item.Implement a function likes :: [String] -&gt; String, which must take in input array, containing the names of people who like an item. It must return the display text as shown in the examples:<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">likes [] <span class="comment">// must be "no one likes this"</span></div><div class="line">likes [<span class="string">"Peter"</span>] <span class="comment">// must be "Peter likes this"</span></div><div class="line">likes [<span class="string">"Jacob"</span>, <span class="string">"Alex"</span>] <span class="comment">// must be "Jacob and Alex like this"</span></div><div class="line">likes [<span class="string">"Max"</span>, <span class="string">"John"</span>, <span class="string">"Mark"</span>] <span class="comment">// must be "Max, John and Mark like this"</span></div><div class="line">likes [<span class="string">"Alex"</span>, <span class="string">"Jacob"</span>, <span class="string">"Mark"</span>, <span class="string">"Max"</span>] <span class="comment">// must be "Alex, Jacob and 2 others like this"</span></div></pre></td></tr></table></figure></p>
<p>For more than 4 names, the number in and 2 others simply increases.<br><a id="more"></a><br>解法其实挺简单 通常的做法就是使用switch-case或者 if-else 来解</p>
<h3 id="解法一"><a href="#解法一" class="headerlink" title="解法一:"></a>解法一:</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">likes</span>(<span class="params">names</span>) </span>&#123;</div><div class="line">  names = names || [];</div><div class="line">  <span class="keyword">switch</span>(names.length)&#123;</div><div class="line">    <span class="keyword">case</span> <span class="number">0</span>: <span class="keyword">return</span> <span class="string">'no one likes this'</span>; <span class="keyword">break</span>;</div><div class="line">    <span class="keyword">case</span> <span class="number">1</span>: <span class="keyword">return</span> names[<span class="number">0</span>] + <span class="string">' likes this'</span>; <span class="keyword">break</span>;</div><div class="line">    <span class="keyword">case</span> <span class="number">2</span>: <span class="keyword">return</span> names[<span class="number">0</span>] + <span class="string">' and '</span> + names[<span class="number">1</span>] + <span class="string">' like this'</span>; <span class="keyword">break</span>;</div><div class="line">    <span class="keyword">case</span> <span class="number">3</span>: <span class="keyword">return</span> names[<span class="number">0</span>] + <span class="string">', '</span> + names[<span class="number">1</span>] + <span class="string">' and '</span> + names[<span class="number">2</span>] + <span class="string">' like this'</span>; <span class="keyword">break</span>;</div><div class="line">    <span class="keyword">default</span>: <span class="keyword">return</span> names[<span class="number">0</span>] + <span class="string">', '</span> + names[<span class="number">1</span>] + <span class="string">' and '</span> + (names.length - <span class="number">2</span>) + <span class="string">' others like this'</span>;</div><div class="line">  &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>主要要说的是关于第二种解法中的模板字符串</p>
<h3 id="解法二"><a href="#解法二" class="headerlink" title="解法二:"></a>解法二:</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">likes</span>(<span class="params">names</span>) </span>&#123;</div><div class="line">  <span class="keyword">return</span> &#123;</div><div class="line">    <span class="number">0</span>: <span class="string">'no one likes this'</span>,</div><div class="line">    <span class="number">1</span>: <span class="string">`<span class="subst">$&#123;names[<span class="number">0</span>]&#125;</span> likes this`</span>, </div><div class="line">    <span class="number">2</span>: <span class="string">`<span class="subst">$&#123;names[<span class="number">0</span>]&#125;</span> and <span class="subst">$&#123;names[<span class="number">1</span>]&#125;</span> like this`</span>, </div><div class="line">    <span class="number">3</span>: <span class="string">`<span class="subst">$&#123;names[<span class="number">0</span>]&#125;</span>, <span class="subst">$&#123;names[<span class="number">1</span>]&#125;</span> and <span class="subst">$&#123;names[<span class="number">2</span>]&#125;</span> like this`</span>, </div><div class="line">    <span class="number">4</span>: <span class="string">`<span class="subst">$&#123;names[<span class="number">0</span>]&#125;</span>, <span class="subst">$&#123;names[<span class="number">1</span>]&#125;</span> and <span class="subst">$&#123;names.length - <span class="number">2</span>&#125;</span> others like this`</span>, </div><div class="line">  &#125;[<span class="built_in">Math</span>.min(<span class="number">4</span>, names.length)]</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h2 id="Template-literals-模板字面量"><a href="#Template-literals-模板字面量" class="headerlink" title="Template literals(模板字面量)"></a>Template literals(模板字面量)</h2><p>关于模板字符串MDN中这样说：<br><blockquote><p>Template literals are string literals allowing embedded expressions. You can use multi-line strings and string interpolation features with them. They were called “template strings” in prior editions of the ES2015 specification.</p>
</blockquote><br>模板字符串又叫模板字面量 是允许嵌入表达式的字符串字面量 而且支持多行字符串和字符串插补特性 是ES5/ES6的新规范</p>
<h3 id="语法示例："><a href="#语法示例：" class="headerlink" title="语法示例："></a>语法示例：</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="string">`string line`</span></div><div class="line"><span class="string">`string <span class="subst">$&#123;expression&#125;</span> string`</span></div><div class="line"><span class="keyword">var</span> name = <span class="string">"string"</span>;</div><div class="line"><span class="built_in">console</span>.log(<span class="string">`This name is a <span class="subst">$&#123;name&#125;</span> `</span>);<span class="comment">// " This name is a string"</span></div></pre></td></tr></table></figure>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> text = <span class="string">`this blog lives at <span class="subst">$&#123;<span class="string">'github.io'</span>&#125;</span>`</span></div><div class="line"><span class="built_in">console</span>.log(text) </div><div class="line"><span class="comment">//  'this blog lives at github.io'</span></div><div class="line"></div><div class="line"><span class="keyword">var</span> today = <span class="keyword">new</span> <span class="built_in">Date</span>()</div><div class="line"><span class="keyword">var</span> text = <span class="string">`today is the <span class="subst">$&#123;today&#125;</span>`</span></div><div class="line"><span class="built_in">console</span>.log(text)</div><div class="line"><span class="comment">// 'today is the Sat Feb 04 2017 00:32:32 GMT+0800 (中国标准时间)'</span></div></pre></td></tr></table></figure>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> article = &#123;</div><div class="line">  <span class="attr">title</span>: <span class="string">'Hello Template Literals'</span>,</div><div class="line">  <span class="attr">teaser</span>: <span class="string">'String interpolation is awesome. Here are some features'</span>,</div><div class="line">  <span class="attr">body</span>: <span class="string">'Lots and lots of sanitized HTML'</span>,</div><div class="line">  <span class="attr">tags</span>: [<span class="string">'es6'</span>, <span class="string">'template-literals'</span>, <span class="string">'es6-in-depth'</span>]</div><div class="line">&#125;</div><div class="line"><span class="keyword">var</span> html = <span class="string">`&lt;article&gt;</span></div><div class="line">  &lt;header&gt;</div><div class="line">    &lt;h1&gt;<span class="subst">$&#123;title&#125;</span>&lt;/h1&gt;</div><div class="line">  &lt;/header&gt;</div><div class="line">  &lt;section&gt;</div><div class="line">    &lt;div&gt;<span class="subst">$&#123;teaser&#125;</span>&lt;/div&gt;</div><div class="line">    &lt;div&gt;<span class="subst">$&#123;body&#125;</span>&lt;/div&gt;</div><div class="line">  &lt;/section&gt;</div><div class="line">  &lt;footer&gt;</div><div class="line">    &lt;ul&gt;</div><div class="line">      <span class="subst">$&#123;tags.map(tag =&gt; <span class="string">`&lt;li&gt;<span class="subst">$&#123;tag&#125;</span>&lt;/li&gt;`</span>).join(<span class="string">'\n      '</span>)&#125;</span></div><div class="line">    &lt;/ul&gt;</div><div class="line">  &lt;/footer&gt;</div><div class="line">&lt;/article&gt;`</div></pre></td></tr></table></figure>
<p>输出后：<br><figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">article</span>&gt;</span></div><div class="line">  <span class="tag">&lt;<span class="name">header</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">h1</span>&gt;</span>Hello Template Literals<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></div><div class="line">  <span class="tag">&lt;/<span class="name">header</span>&gt;</span></div><div class="line">  <span class="tag">&lt;<span class="name">section</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">div</span>&gt;</span>String interpolation is awesome. Here are some features<span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">div</span>&gt;</span>Lots and lots of sanitized HTML<span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line">  <span class="tag">&lt;/<span class="name">section</span>&gt;</span></div><div class="line">  <span class="tag">&lt;<span class="name">footer</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">ul</span>&gt;</span></div><div class="line">      <span class="tag">&lt;<span class="name">li</span>&gt;</span>es6<span class="tag">&lt;/<span class="name">li</span>&gt;</span></div><div class="line">      <span class="tag">&lt;<span class="name">li</span>&gt;</span>template-literals<span class="tag">&lt;/<span class="name">li</span>&gt;</span></div><div class="line">      <span class="tag">&lt;<span class="name">li</span>&gt;</span>es6-in-depth<span class="tag">&lt;/<span class="name">li</span>&gt;</span></div><div class="line">    <span class="tag">&lt;/<span class="name">ul</span>&gt;</span></div><div class="line">  <span class="tag">&lt;/<span class="name">footer</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">article</span>&gt;</span></div></pre></td></tr></table></figure></p>
<p>模板字符串使用反引号(``)来代替普通字符串的单引号双引号 模板字符串可以包含特定语法${expression}的占位符 模板字符串它们看起来与普通字符串并没有什么特别。在最简单的情况下，它们与普通字符串的表现一致 通过使用模板字符串 可以使字符串中插入值更加简便 美观</p>
<h3 id="功能："><a href="#功能：" class="headerlink" title="功能："></a>功能：</h3><ul>
<li>可以在模板字面量中插入变量</li>
<li>可以插入任意JavaScript表达式 并不限于变量 甚至可以在模板字符串中相互嵌套 </li>
<li>如果在其中需要使用反撇号 需要使用反斜杠转义: ‘\<code>&#39; ==&gt; &quot;</code>“;$和{}同理</li>
<li>支持多行插入 模板字符串中所有的空格 换行 缩进 都会原样输出在生成的字符串中</li>
<li>如果插入的占位符不是字符串 可以将其转化为字符串 例如：如果expression为一个对象 它将会调用它的.toString()方法将其转化为字符串值</li>
</ul>
<h3 id="不足"><a href="#不足" class="headerlink" title="不足:"></a>不足:</h3><ul>
<li>不会自动转义特殊字符 为了避免xss 应当像拼接普通字符串时做的那样对非置信数据进行特殊处理</li>
<li>没有内建循环和条件语法支持 无法遍历填充等</li>
<li>它们不能替代模板引擎的地位</li>
</ul>
<h3 id="带标签的模板字符串"><a href="#带标签的模板字符串" class="headerlink" title="带标签的模板字符串"></a>带标签的模板字符串</h3><p>带标签的模板字符串是模板字符串的一种高级表达形式 它允许通过标签函数修改模板字符串的输出 标签模板的语法非常简单，在模板字符串开始的反撇号前附加一个额外的标签即可 标签函数的第一个参数是包含了字符串字面值的数组 第二个参数是在第一个参数后的每一个参数都是被替换后的表达式 最后标签函数返回处理好的字符串 其中标签函数名无特殊限制 而且标签函数不一定要返回一个字符串<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> a = <span class="number">5</span>;</div><div class="line"><span class="keyword">var</span> b = <span class="number">10</span>;</div><div class="line"></div><div class="line">tag<span class="string">`Hello <span class="subst">$&#123;a+b&#125;</span> world <span class="subst">$&#123;a*b&#125;</span>`</span>;<span class="comment">// "Bazinga!"</span></div><div class="line"></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">tag</span>(<span class="params">strings,...values</span>)</span>&#123;</div><div class="line">    <span class="built_in">console</span>.log(strings[<span class="number">0</span>]);<span class="comment">// "Hello"</span></div><div class="line">    <span class="built_in">console</span>.log(strings[<span class="number">1</span>]);<span class="comment">//" world"</span></div><div class="line">    <span class="built_in">console</span>.log(strings[<span class="number">2</span>]);<span class="comment">// ""</span></div><div class="line">    <span class="built_in">console</span>.log(values[<span class="number">0</span>]);<span class="comment">//15</span></div><div class="line">    <span class="built_in">console</span>.log(values[<span class="number">1</span>]);<span class="comment">//50</span></div><div class="line">    <span class="keyword">return</span> <span class="string">"Bazinga!"</span></div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>可以通过使用标签函数自行解决 模板字符串无法自动转义特殊字符的问题<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> msg = SafterHTML<span class="string">`&lt;p&gt;<span class="subst">$&#123;bonk.sender&#125;</span> 向你问好 &lt;/p&gt;`</span>;</div></pre></td></tr></table></figure></p>
<p>上述代码等效于<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> msg = SaferHTML(templateData, bonk.sender);</div></pre></td></tr></table></figure></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">SaferHTML</span>(<span class="params">templateData</span>) </span>&#123;</div><div class="line">  <span class="keyword">var</span> s = templateData[<span class="number">0</span>];</div><div class="line">  <span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">1</span>; i &lt; <span class="built_in">arguments</span>.length; i++) &#123;</div><div class="line">    <span class="keyword">var</span> arg = <span class="built_in">String</span>(<span class="built_in">arguments</span>[i]);</div><div class="line"></div><div class="line">    <span class="comment">// 转义占位符中的特殊字符。</span></div><div class="line">    s += arg.replace(<span class="regexp">/&amp;/g</span>, <span class="string">"&amp;"</span>)</div><div class="line">            .replace(<span class="regexp">/&lt;/g</span>, <span class="string">"&lt;"</span>)</div><div class="line">            .replace(<span class="regexp">/&lt;/g</span>, <span class="string">"&gt;"</span>);</div><div class="line"></div><div class="line">    <span class="comment">// 不转义模板中的特殊字符。</span></div><div class="line">    s += templateData[i];</div><div class="line">  &#125;</div><div class="line">  <span class="keyword">return</span> s;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>通过这样的定义，标签模板SaferHTML<code>&lt;p&gt;${bonk.sender} 向你问好。&lt;/p&gt;</code> 可能扩展为字符串 “</p><p>ES6<3er 向你问好<="" p="">“。即使一个恶意命名的用户，例如“黑客Steve<script>alert(‘xss’);</script>”，向其他用户发送一条骚扰信息，无论如何这条信息都会被转义为普通字符串，其他用户不会受到潜在攻击的威胁</3er></p>
<h4 id="补充"><a href="#补充" class="headerlink" title="补充"></a>补充</h4><p>在标签函数的第一个参数中，存在一个特殊的属性raw ，我们可以通过它来访问模板字符串的原始字符串 另外使用String.raw() 方法创建原始字符串和使用默认模板函数和字符串连接创建是一样的<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">tag</span>(<span class="params">strings, ...values</span>) </span>&#123;</div><div class="line">  <span class="built_in">console</span>.log(strings.raw[<span class="number">0</span>]); </div><div class="line">  <span class="comment">// "string text line 1 \\n string text line 2"</span></div><div class="line">&#125;</div><div class="line"></div><div class="line">tag<span class="string">`string text line 1 \n string text line 2`</span>;</div></pre></td></tr></table></figure></p>
<h4 id="参考链接"><a href="#参考链接" class="headerlink" title="参考链接:"></a>参考链接:</h4><p><a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/template_strings" target="_blank" rel="external">模板字符串</a><br><a href="https://ponyfoo.com/articles/es6-template-strings-in-depth" target="_blank" rel="external">ES6 Template Literals in Depth</a><br><a href="http://www.infoq.com/cn/articles/es6-in-depth-template-string" target="_blank" rel="external">深入浅出ES6（四）：模板字符串</a></p>

      
    </div>

    <div>
      
        

      
    </div>

    <div>
      
        

      
    </div>


    <footer class="post-footer">
      
        <div class="post-tags">
          
            <a href="/tags/JavaScript/" rel="tag"># JavaScript</a>
          
            <a href="/tags/ES6/" rel="tag"># ES6</a>
          
        </div>
      

      
        <div class="post-nav">
          <div class="post-nav-next post-nav-item">
            
              <a href="/2017/01/26/关于数组去重/" rel="next" title="关于数组去重">
                <i class="fa fa-chevron-left"></i> 关于数组去重
              </a>
            
          </div>

          <span class="post-nav-divider"></span>

          <div class="post-nav-prev post-nav-item">
            
              <a href="/2017/02/28/CSS3与3D轮转(一)/" rel="prev" title="CSS3与3D轮转(一)">
                CSS3与3D轮转(一) <i class="fa fa-chevron-right"></i>
              </a>
            
          </div>
        </div>
      

      
      
    </footer>
  </article>



    <div class="post-spread">
      
    </div>
  </div>

          
          </div>
          


          
  <div class="comments" id="comments">
    
      <div id="disqus_thread">
        <noscript>
          Please enable JavaScript to view the
          <a href="//disqus.com/?ref_noscript">comments powered by Disqus.</a>
        </noscript>
      </div>
    
  </div>


        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    <div class="sidebar-inner">

      

      
        <ul class="sidebar-nav motion-element">
          <li class="sidebar-nav-toc sidebar-nav-active" data-target="post-toc-wrap" >
            文章目录
          </li>
          <li class="sidebar-nav-overview" data-target="site-overview">
            站点概览
          </li>
        </ul>
      

      <section class="site-overview sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <img class="site-author-image" itemprop="image"
               src="/uploads/avatar.png"
               alt="LiuLei" />
          <p class="site-author-name" itemprop="name">LiuLei</p>
          <p class="site-description motion-element" itemprop="description">Keep Going</p>
        </div>
        <nav class="site-state motion-element">
        
          
            <div class="site-state-item site-state-posts">
              <a href="/archives">
                <span class="site-state-item-count">7</span>
                <span class="site-state-item-name">日志</span>
              </a>
            </div>
          

          

          
            <div class="site-state-item site-state-tags">
              <a href="/tags">
                <span class="site-state-item-count">7</span>
                <span class="site-state-item-name">标签</span>
              </a>
            </div>
          

        </nav>

        

        <div class="links-of-author motion-element">
          
            
              <span class="links-of-author-item">
                <a href="https://github.com/LiuL0703" target="_blank" title="GitHub">
                  
                    <i class="fa fa-fw fa-github"></i>
                  
                  GitHub
                </a>
              </span>
            
              <span class="links-of-author-item">
                <a href="https://twitter.com/louieliu_25" target="_blank" title="Twitter">
                  
                    <i class="fa fa-fw fa-twitter"></i>
                  
                  Twitter
                </a>
              </span>
            
              <span class="links-of-author-item">
                <a href="http://weibo.com/LouieLiu_25" target="_blank" title="微博">
                  
                    <i class="fa fa-fw fa-weibo"></i>
                  
                  微博
                </a>
              </span>
            
              <span class="links-of-author-item">
                <a href="http://www.zhihu.com/people/liu-lei-70-79" target="_blank" title="知乎">
                  
                    <i class="fa fa-fw fa-globe"></i>
                  
                  知乎
                </a>
              </span>
            
          
        </div>

        
        

        
        

        


      </section>

      
      <!--noindex-->
        <section class="post-toc-wrap motion-element sidebar-panel sidebar-panel-active">
          <div class="post-toc">

            
              
            

            
              <div class="post-toc-content"><ol class="nav"><li class="nav-item nav-level-2"><a class="nav-link" href="#Description"><span class="nav-number">1.</span> <span class="nav-text">Description:</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#解法一"><span class="nav-number">1.1.</span> <span class="nav-text">解法一:</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#解法二"><span class="nav-number">1.2.</span> <span class="nav-text">解法二:</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Template-literals-模板字面量"><span class="nav-number">2.</span> <span class="nav-text">Template literals(模板字面量)</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#语法示例："><span class="nav-number">2.1.</span> <span class="nav-text">语法示例：</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#功能："><span class="nav-number">2.2.</span> <span class="nav-text">功能：</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#不足"><span class="nav-number">2.3.</span> <span class="nav-text">不足:</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#带标签的模板字符串"><span class="nav-number">2.4.</span> <span class="nav-text">带标签的模板字符串</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#补充"><span class="nav-number">2.4.1.</span> <span class="nav-text">补充</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#参考链接"><span class="nav-number">2.4.2.</span> <span class="nav-text">参考链接:</span></a></li></ol></li></ol></li></ol></div>
            

          </div>
        </section>
      <!--/noindex-->
      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright" >
  
  &copy; 
  <span itemprop="copyrightYear">2017</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">LiuLei</span>
</div>


<div class="powered-by">
  由 <a class="theme-link" href="https://hexo.io">Hexo</a> 强力驱动
</div>

<div class="theme-info">
  主题 -
  <a class="theme-link" href="https://github.com/iissnan/hexo-theme-next">
    NexT.Pisces
  </a>
</div>


        

        
      </div>
    </footer>

    <div class="back-to-top">
      <i class="fa fa-arrow-up"></i>
    </div>
  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  




  
  <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>

  
  <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>

  
  <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>

  
  <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.1.0"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.1.0"></script>



  
  


  <script type="text/javascript" src="/js/src/affix.js?v=5.1.0"></script>

  <script type="text/javascript" src="/js/src/schemes/pisces.js?v=5.1.0"></script>



  
  <script type="text/javascript" src="/js/src/scrollspy.js?v=5.1.0"></script>
<script type="text/javascript" src="/js/src/post-details.js?v=5.1.0"></script>



  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.0"></script>



  



  

    <script type="text/javascript">
      var disqus_shortname = 'https-liul0703-github-io';
      var disqus_identifier = '2017/02/03/Template-Literals/';

      var disqus_title = "Template Literals(模板字符串)";


      function run_disqus_script(disqus_script) {
        var dsq = document.createElement('script');
        dsq.type = 'text/javascript';
        dsq.async = true;
        dsq.src = '//' + disqus_shortname + '.disqus.com/' + disqus_script;
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
      }

      run_disqus_script('count.js');

      
        var disqus_config = function () {
            this.page.url = disqus_url;
            this.page.identifier = disqus_identifier;
            this.page.title = disqus_title;
        };
        run_disqus_script('embed.js');
      

    </script>
  









  
  

  

  

  

  


</body>
</html>
